<ion-header>
  <ion-toolbar>
    <ion-title>Crear nuevo Post</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="postForm" (ngSubmit)="agregarReceta(postForm.value)">
    <ion-grid>
      <!-- Imagen del Post -->
      <ion-row>
        <ion-col size="12" class="ion-text-center">
          <ion-item button (click)="uploadImg()">
            <ion-img
              [src]="!postImg ? 'https://ionicframework.com/docs/img/demos/avatar.svg' : postImg"
              class="post-image">
            </ion-img>
          </ion-item>
          <ion-label>Haz clic en la imagen para subir una nueva</ion-label>
        </ion-col>
      </ion-row>

      <!-- Título del Post -->
      <ion-row>
        <ion-col size="12">
          <ion-item>
            <ion-input
              type="text"
              placeholder="Título del post"
              label="Titulo"
              label-placement="floating"
              formControlName="nombre"
              name="nombre">
            </ion-input>
          </ion-item>
        </ion-col>
      </ion-row>

      <!-- Descripción del Post -->
      <ion-row>
        <ion-col size="12">
          <ion-item>
            <ion-textarea
              placeholder="Escribe una descripción del post"
              label="Descripcion"
              label-placement="floating"
              formControlName="descripcion"
              name="descripcion">
            </ion-textarea>
          </ion-item>
        </ion-col>
      </ion-row>

      <!-- Lista de Ingredientes (Inputs) -->
      <ion-row>
        <ion-col size="12">
          <ion-list formArrayName="ingredientes">
            <ion-item *ngFor="let ing of ingredientes.controls; let i = index" [formGroupName]="i">
              <!-- Nombre del Ingrediente -->
              <ion-input
                type="text"
                placeholder="Nombre del ingrediente"
                formControlName="nombre">
              </ion-input>

              <!-- Cantidad del Ingrediente -->
              <ion-input
                type="text"
                placeholder="Cantidad"
                formControlName="cantidades">
              </ion-input>

              <!-- Botón para eliminar ingrediente -->
              <ion-button
                fill="clear"
                color="danger"
                (click)="quitarIngrediente(i)"
                slot="end">
                <ion-icon name="trash-outline"></ion-icon>
              </ion-button>
            </ion-item>
          </ion-list>
        </ion-col>
      </ion-row>

      <!-- Botón para Agregar Ingredientes -->
      <ion-row>
        <ion-col size="12" class="ion-text-center">
          <ion-button expand="block" (click)="agregarIngrediente()">
            Agregar Ingrediente
          </ion-button>
        </ion-col>
      </ion-row>

      <!-- Botón para Enviar el Post -->
      <ion-row>
        <ion-col size="12" class="ion-text-center">
          <ion-button expand="block" color="primary" type="submit">
            Guardar Post
          </ion-button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>
</ion-content>
